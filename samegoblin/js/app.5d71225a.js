(function(e){function t(t){for(var o,a,c=t[0],i=t[1],u=t[2],b=0,m=[];b<c.length;b++)a=c[b],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var o={},n={app:0},s=[];function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=o,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/samegoblin/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";r("85ec")},"0a5a":function(e,t,r){"use strict";r("af94")},"282e":function(e,t,r){},"38be":function(e,t,r){e.exports=r.p+"img/bomb.9029dbcf.svg"},4729:function(e,t,r){e.exports=r.p+"img/replay.d3f9beae.svg"},"85ec":function(e,t,r){},"98f1":function(e,t,r){},af94:function(e,t,r){},bbcc:function(e,t,r){"use strict";r("98f1")},c994:function(e,t,r){"use strict";r("282e")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("h1",[e._v("Same Goblin")]),r("router-link",{attrs:{to:"/settings"}},[e._v("Settings")]),e._v(" | "),r("router-link",{attrs:{to:"/game"}},[e._v("Game")])],1),r("router-view")],1)},s=[],a=(r("034f"),r("2877")),c={},i=Object(a["a"])(c,n,s,!1,null,null,null),u=i.exports,l=r("8c4f"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{ud:"game"}},[r("GameGrid",{key:e.$store.state.randomKey})],1)},m=[],v=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("div",{attrs:{id:"game-grid"},on:{mouseout:function(t){return e.unhoverAllBubbles()}}},e._l(e.$store.state.bubbles,(function(t,r){return o("div",{key:r,staticClass:"bubble-stack"},e._l(t,(function(t,n){return o("GameBubble",{key:e.getKey(n,t),attrs:{bubbleIndex:n,stackIndex:r,bubble:t,bombMode:e.bombMode,className:e.getClassName(t)}})})),1)})),0),o("div",{attrs:{id:"bombrack"}},e._l(e.$store.state.bombs,(function(t,r){return o("div",{key:r,on:{click:function(t){return e.clickBomb(r)}}},[o("Bomb",{attrs:{active:r===e.activeBombIndex}})],1)})),0),o("div",{attrs:{id:"scorebar"}},[o("div",[o("h2",{staticClass:"score"},[e._v(" Score: "+e._s(e.$store.state.score)+" "),e.getPotentialScore()>0?o("span",{staticClass:"potential"},[e._v("+ "+e._s(e.getPotentialScore()))]):e._e()]),o("h2",{staticClass:"score"},[e._v("Best: "+e._s(e.$store.state.hiScore))])]),o("img",{attrs:{src:r("4729"),height:"40px"},on:{click:function(t){return e.resetGame()}}})])])},d=[];r("d3b7"),r("25f0"),r("159b");function f(e,t){for(var r=[],o=0;o<t;o++){for(var n=[],s=0;s<e;s++)n.push({color:h(),key:s,hovered:!1});r.push(n)}return r}function h(){var e=Math.floor(4*Math.random());switch(e){case 0:return"red";case 1:return"green";case 2:return"blue";case 3:return"yellow";default:return""}}var p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:[e.className],on:{click:function(t){return e.clickBubble()},mouseover:function(t){return e.hoverBubble()}}})},g=[],y=r("d4ec"),B=r("bee2"),x=r("262e"),C=r("2caf"),k=(r("a9e3"),r("9ab4")),_=r("1b40"),w=_["b"].extend({props:{stackIndex:Number,bubbleIndex:Number,bubble:{type:Object},className:String,bombMode:Boolean}}),j=function(e){Object(x["a"])(r,e);var t=Object(C["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return Object(B["a"])(r,[{key:"clickBubble",value:function(){this.$store.dispatch("handleBubbleClick")}},{key:"hoverBubble",value:function(){if(!this.bubble.hovered){var e={x:this.stackIndex,y:this.bubbleIndex,requiredColor:this.bubble.color};this.bombMode?this.$store.dispatch("hoverSingleBubble",e):this.$store.dispatch("hoverBubblesDriver",e)}}},{key:"getColor",value:function(){return this.className}}]),r}(w);j=Object(k["a"])([_["a"]],j);var O=j,S=O,R=(r("0a5a"),Object(a["a"])(S,p,g,!1,null,null,null)),G=R.exports,$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper",style:e.wrapperStyle},[o("img",{style:e.style,attrs:{src:r("38be")}})])},I=[],K=r("5530"),H={props:{active:Boolean},computed:{style:function(){return{height:"24px",fill:"red"}},wrapperStyle:function(){var e={height:"36px",width:"36px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",borderRadius:"4px",margin:"4px"};return this.active?Object(K["a"])(Object(K["a"])({},e),{},{border:"1px solid red",backgroundColor:"rgba(255, 0, 0, 0.2)"}):Object(K["a"])(Object(K["a"])({},e),{},{border:"1px solid black"})}}},A=H,M=Object(a["a"])(A,$,I,!1,null,null,null),E=M.exports,N={components:{GameBubble:G,Bomb:E},computed:{bombMode:function(){return this.activeBombIndex>-1},activeBombIndex:function(){return this.$store.state.activeBombIndex}},methods:{getClassName:function(e){var t="bubble ";return t+=e.color,t+=e.hovered?" hovered":"",t},getKey:function(e,t){var r=e.toString();return r+=t.hovered?"hov":"reg",r},getPotentialScore:function(){var e=0;return this.$store.state.bubbles.forEach((function(t){t.forEach((function(t){t.hovered&&e++}))})),0===e?0:Math.pow(e-1,2)},unhoverAllBubbles:function(){this.$store.dispatch("unhoverAllBubbles")},resetGame:function(){this.$store.dispatch("resetGame")},clickBomb:function(e){this.activeBombIndex===e?this.$store.dispatch("deactivateBombs"):this.$store.dispatch("activateBomb",e)}}},P=N,T=(r("bbcc"),Object(a["a"])(P,v,d,!1,null,null,null)),q=T.exports,J={components:{GameGrid:q}},D=J,Q=Object(a["a"])(D,b,m,!1,null,null,null),z=Q.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings"},[r("div",{staticClass:"carousel"},[r("router-link",{attrs:{to:"/game"}},[r("div",{staticClass:"optionCard",on:{click:function(t){return e.startGame(9,9)}}},[r("h2",{staticClass:"cardTitle"},[e._v("Quick")]),r("div",{staticClass:"sampleBoard quick"}),r("h2",{staticClass:"cardTitle"},[e._v("9 x 9")])])]),r("router-link",{attrs:{to:"/game"}},[r("div",{staticClass:"optionCard",on:{click:function(t){return e.startGame(9,16)}}},[r("h2",{staticClass:"cardTitle"},[e._v("Classic")]),r("div",{staticClass:"sampleBoard classic"}),r("h2",{staticClass:"cardTitle"},[e._v("9 x 16")])])]),r("router-link",{attrs:{to:"/game"}},[r("div",{staticClass:"optionCard",on:{click:function(t){return e.startGame(16,24)}}},[r("h2",{staticClass:"cardTitle"},[e._v("Jumbo")]),r("div",{staticClass:"sampleBoard jumbo"}),r("h2",{staticClass:"cardTitle"},[e._v("16 x 24")])])])],1)])},L=[],U=function(e){Object(x["a"])(r,e);var t=Object(C["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return Object(B["a"])(r,[{key:"startGame",value:function(e,t){this.$store.dispatch("startNewGame",{numRows:e,numCols:t})}}]),r}(_["b"]);U=Object(k["a"])([_["a"]],U);var V=U,W=V,X=(r("c994"),Object(a["a"])(W,F,L,!1,null,"2a322ced",null)),Y=X.exports;o["a"].use(l["a"]);var Z=[{path:"/",name:"Settings",component:Y},{path:"/settings",name:"settings",component:Y},{path:"/game",name:"Game",component:z}],ee=new l["a"]({routes:Z}),te=ee,re=(r("4de4"),r("2f62"));o["a"].use(re["a"]);var oe=new re["a"].Store({state:{numRows:9,numCols:16,bubbles:f(9,16),bubbleReserves:f(9,16),randomKey:!0,numHovered:0,score:0,hiScore:0,bombs:3,activeBombIndex:-1},mutations:{resetNumHovered:function(e){e.numHovered=0},toggleRandomKey:function(e){e.randomKey=!e.randomKey},setBubbleHover:function(e,t){e.bubbles[t.x][t.y].hovered=!0,e.numHovered++},incrementScore:function(e){e.score+=Math.pow(e.numHovered-1,2),e.score>e.hiScore&&(e.hiScore=e.score)},removeHoveredBubbles:function(e){e.bubbles.forEach((function(t,r){var o=t.length;e.bubbles[r]=t.filter((function(e){return!e.hovered}));for(var n=o-e.bubbles[r].length,s=e.bubbleReserves[r],a=0;a<n;a++){var c=s.shift();c&&e.bubbles[r].push(c)}})),e.numHovered=0},unhoverAll:function(e){for(var t=0;t<e.bubbles.length;t++){var r=e.bubbles[t];r.forEach((function(e){return e.hovered=!1}))}e.numHovered=0},resetGameState:function(e){e.bubbles=f(e.numRows,e.numCols),e.bubbleReserves=f(e.numRows,e.numCols),e.score=0,e.numHovered=0,e.bombs=3,e.activeBombIndex=-1},setRowsCols:function(e,t){e.numRows=t.numRows,e.numCols=t.numCols},setActiveBomb:function(e,t){e.activeBombIndex=t},useBomb:function(e){e.bombs--,e.activeBombIndex=-1}},actions:{hoverBubbleRecursive:function(e,t){var r,o=e.commit,n=e.dispatch;try{r=this.state.bubbles[t.x][t.y]}catch(a){return}if(r&&!0!==r.hovered&&r.color===t.requiredColor){o("setBubbleHover",t);var s=[[-1,0],[1,0],[0,1],[0,-1]];s.forEach((function(e){n("hoverBubbleRecursive",{x:t.x+e[0],y:t.y+e[1],requiredColor:t.requiredColor})}))}},handleBubbleClick:function(e){var t=e.commit;this.state.numHovered>1?(t("incrementScore"),t("removeHoveredBubbles"),t("toggleRandomKey")):this.state.activeBombIndex>-1&&(t("removeHoveredBubbles"),t("useBomb"),t("toggleRandomKey"))},hoverSingleBubble:function(e,t){var r=e.commit;r("unhoverAll"),r("setBubbleHover",t),r("toggleRandomKey")},hoverBubblesDriver:function(e,t){var r=e.commit,o=e.dispatch;r("unhoverAll"),o("hoverBubbleRecursive",t),r("toggleRandomKey")},unhoverAllBubbles:function(e){var t=e.commit;t("unhoverAll"),t("toggleRandomKey")},deactivateBombs:function(e){var t=e.commit;t("unhoverAll"),t("setActiveBomb",-1),t("toggleRandomKey")},activateBomb:function(e,t){var r=e.commit;r("unhoverAll"),r("setActiveBomb",t),r("toggleRandomKey")},resetGame:function(e){var t=e.commit;t("unhoverAll"),t("resetGameState"),t("toggleRandomKey")},startNewGame:function(e,t){var r=e.commit;r("setRowsCols",{numRows:t.numRows,numCols:t.numCols}),r("resetGameState"),r("toggleRandomKey")}},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:te,store:oe,render:function(e){return e(u)}}).$mount("#app")}});
//# sourceMappingURL=app.5d71225a.js.map